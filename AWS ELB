AWS ELB (Elastic load balancing)

Load balancers are servers that control incoming traffic to other servers (downstream).
Load balancers have the following characteristics:
1. They spread the incoming load onto the AWS resources that are available (ex. EC2 instances).
2. They provide a single point of contact to your application (DNS).
3. They seemlessly handle failures of downstream instances.
4. They provide SSL termination (HTTPS) to your websites.
5. They have high availability across zones.
6. They can enforce stickiness with cookies.
7. They are able to separate public traffic from private traffic.
8. They have the ability to perform health checks:
   - Health checks are done on a port and route
   - Health checks determine whether a resource is healthy and able to respond to requests (ex. EC2 instances)
   - If health check response is other than 200, resource is deemed as unhealthy

Load balancer types are the following:
1. Application Load Balancer:
   - HTTP, HTTPS, Websocket
2. Network Load Balancer:
   - TCP, TLS (secure TCP), UDP
3. Gateway Load Balancer:
   - IP Protocol

!!IPORTANT:
 - Load Balancer security groups can be linked to the security groups of EC2 instances (or other resources).
 - This is for the purpose of allowing access to your EC2 instances only through the load balancer.
 - This practice adds an extra layer of security to the underlying EC2 instances.
 - HTTP and HTTPS traffic must be allowed for the load balancer security group
 - The EC2 instances security group must be modified to allow HTTP and HTTPS access only if it comes from the load balancer.

--------------------------------------------------------------------------------------------------------------------------------------------

Application Load Balancer (ALB)

The ALB is layer 7 (HTTP)
ALB can balance the load to multiple HTTP applications across multiple machines (target groups).
ALB can balance the load of multiple applications on one machine (ex: containers).
ALB supports HTTP/2 and WebSocket
ALB supports redirects (ex: from HTTP to HTTPS)
ALB can route to different target groups:
 - Routing via path in the URL (ex: example.com/users, example.com/posts).
 - Routing via hostname in the URL (ex: first.example.com, second.example.com).
 - Routing via URL query parameters (ex: example.com/users?id=123&order=false).
ALB is perfect when using micro services or container based apps (ex: Docker, AWS ECS).
ALB has a port mapping feature to redirect to a dynamic port in ECS.
ALB target groups can be:
 - EC2 instances (which can be managed by an autoscaling group) HTTP.
 - ECS tasks (managed by ECS) HTTP.
 - Lambda functions (HTTP requests translated into a JSON event).
 - IP addresses (private).
ALB can route to multiple target groups concurrently.
ALB health checks are at the target group level.
ALB has a fixed hostname (XXX.region.elb.amazonaws.com).
Application servers (ex: EC2 instances) do not see the client IP directly (due to the fact that they are communicating with the ALB).
ALB forwards the client IP with the following header: X-Forwarded-For.
ALB forwards the port with the following header: X-Forwarded-Port

--------------------------------------------------------------------------------------------------------------------------------------------
